# CSS世界

## 第1章 概述

### 何为“流”

“流”实际上是CSS世界中的一种基本的定位和布局机制,可以理解为现实世界的一套物理规则,“流”跟现实世界的“水流”有异曲同工的表现。所谓“流”,就是CSS世界中引导元素排列和定位的一条看不见的“水流”。

### 什么是流体布局

所谓“流体布局”,指的是利用元素“流”的特性实现的各类布局效果。因为“流”本身具有自适应特性,所以“流体布局”往往都是具有自适应性的。但是,“流体布局”并不等同于“自适应布局”。“自适应布局”是对凡是具有自适应特性的一类布局的统称,“流体布局”要狭窄得多。例如,表格布局也可以设置为100%自适应,但表格和“流”不是一路的,并不属于“流体布局”。

## 第3章 流、元素与基本尺寸

每个元素都两个盒子,外在盒子和内在盒子。外在盒子负责元素是可以一行显示,还是只能换行显示;内在盒子负责宽高、内容呈现什么的。但是呢,造物主又想了想,叫“内在盒子”虽然容易理解,但是未免有些俗气,难登大雅之堂,于是,又想了一个更专业的名称,叫作“容器盒子”。

按照`display`的属性值不同,值为`block`的元素的盒子和内在的“块级容器盒子”组成,值为`inline-block`的元素则由外在的“内联盒子”和内在的“块级容器盒子”组成,值为`inline`的元素则内外均是“内联盒子”。

### width/height 作用在哪个盒子上

内在盒子,也就 是“容器盒子”。

### 深藏不露的 width:auto

1. 充分利用可用空间。比方说,`<div>、<p>`这些元素的宽度默认是100%于父级容器的。这种充分利用可用空间的行为还有个专有名字,叫作fill-available,大家了解即可。
1. 收缩与包裹。典型代表就是浮动、绝对定位、`inline-block`元素或`table`元素,英文称为shrink-to-fit,直译为“收缩到合适”,有那么点儿意思,但不够形象,我一直把这种现象称为“包裹性”。CSS3中的fit-content指的就是这种宽度表现。
1. 收缩到最小。
1. 超出容器限制。除非有明确的 width 相关设置,否则上面 3 种情况尺寸都不会主动 超过父级容器宽度的,但是存在一些特殊情况。例如,内容很长的连续的英文和数字,或者内联 元素被设置了 white-space:nowrap,则表现为“恰似一江春水向东流,流到断崖也不回头”。

### 外部尺寸与流体特性

1.正常流宽度。在页面中随便扔一个`<div>`元素,其尺寸表现就会和这水流一样铺满容器。这就是`block`容器的流特性。这种特性,所有浏览器的表现都是一致的。

所谓流动性,并不是看上去的宽度100%显示这么简单,而是一种`margin/border/padding`和`content`内容区域自动分配水平空间的机制。

2.格式化宽度。格式化宽度仅出现在“绝对定位模型”中,也就是出现在 `position`属性值为`absolute`或`fixed`的元素中。在默认情况下,绝对定位元素的宽度表现是“包裹性”,宽度由内部尺寸决定,但是,有一种情况其宽度是由外部尺寸决定的,是什么情况呢?

对于非替换元素,当`left/top`或`top/bottom`对立方位的属性值同时存在的时候,元素的宽度表现为“格式化宽度”,其宽度大小相对于最近的具有定位特性(`position`属性值不是`static`)的祖先元素计算。

### 内部尺寸与流体特性

1. 包裹性。
1. 首选最小宽度。所谓“首选最小宽度”,指的是元素最适合的最小宽度。
1. 最大宽度。最大宽度就是元素可以有的最大宽度。我自己是这么理解的,“最大宽 度”实际等同于“包裹性”元素设置 white-space:nowrap 声明后的宽 度。如果内部没有块级元素或者块级元素没有设定宽度值,则“最大宽度”实际上是最大的连 续内联盒子的宽度。

### 宽度分离

```js
.father{
  width: 102px;
}
.son {
  border: 1px solid;
  padding: 20px;
}
```

### 改变`width/height`作用细节的`box-sizing`

还记不记得“内在盒子”的4个盒子?它们分别是`content box`、`padding box`、`border box`和`margin box`。默认情况下,`width`是作用在`content box`上的,`box-sizing`的作用就是可以把`width`作用的盒子变成其他几个。

### .box-sizing 发明的初衷

拿文本域<`textarea>`举例,<`textarea>`为替换元素,替换元素的特性之一就是尺寸由内部元素决定,且无论其`display`属性值是`inline`还是`block`。这个特性很有意思,对于非替换元素,如果其`display`属性值为`block`,则会具有流动性,宽度由外部尺寸决定,但是替换元素的宽度却不受`display`水平影响,因此,我们通过CSS修改<`textarea>`的`display`水平是无法让尺寸100%自适应父容器的

在我看来,`box-sizing`被发明出来最大的初衷应该是解决替换元素宽度自适应问题。如果真的如我所言,那`*{box-sizing:border-box}`是不是没用在点儿上呢?是不是应该像下面这样CSS重置才更合理呢?

```js
input, textarea, img, video, object {
box-sizing: border-box;
}
```

### min-width/max-width

1.超越`!important`  
超越`!important`指的是`max-width`会覆盖`width`

2.超越最大
超越最大指的是`min-width`覆盖`max-width`,此规则发生在`min-width`和`max-width`冲突的时候。

### 内联元素

“内联元素”的“内联”特指“外在盒子”。浮动元素不是内联级别的。

### 内联盒模型

```js
<p>这是一行普通的文字,这里有个 <em>em</em> 标签。</p>
```

1. 内容区域(content area)。内容区域指一种围绕文字看不见的盒子,其大小仅受字符本身特性控制,本质上是一个字符盒子(character box);但是有些元素,如图片这样的替换元素,其内容显然不是文字,不存在字符盒子之类的,因此,对于这些元素,内容区域可以看成元素自身。
1. 内联盒子(inline box)。“内联盒子”不会让内容成块显示,而是排成一行,这里的“内联盒子”实际指的就是元素的“外在盒子”,用来决定元素是内联还是块级。该盒子又可以细分为“内联盒子”和“匿名内联盒子”两类
1. 行框盒子(line box)。每一行就是一个“行框盒子”,每个“行框盒子”又是由一个一个“内联盒子”组成的。
1. 包含盒子(containing box)。`<p>`标签就是一个“包含盒子”,此盒子由一行一行的“行框盒子”组成。
